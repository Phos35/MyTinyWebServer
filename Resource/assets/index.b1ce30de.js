import{r as e,o as t,c as n,a as s,t as r,F as o,b as i,d as a,e as p,f as l,w as c,g as u,h as d,V as h,i as f,j as m}from"./vendor.09afcf8c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g={class:"history"},y=s("br",null,null,-1),v=a(),T=s("br",null,null,-1),b={class:"input-lable"},w={class:"prefix",style:{"font-weight":"bold"}},x={id:"ac-tip"};const C={data:()=>({introduction:"",history:[],curPath:["~"],user:"unregistered",curResponse:"- TODO ADD RESPONSE",autoTip:"",tips:["cat","cd","clear","ls","markdown"]}),created(){var e=new URLSearchParams;e.append("type","introduction");let t=this;d.post("api/",e).then((function(e){console.log("responseType: ",typeof e.data),t.introduction=e.data})).catch((function(e){console.log(e)}))},computed:{pwd(){return this.curPath[this.curPath.length-1]}},methods:{focusInputLine(){this.$refs.inputLine.focus()},preventTab(e){e.preventDefault()},cmdCompleted(e){console.log("EnterCMDHandler",e.target.innerText.replace(/\r|\n/gi,""));var t=new URLSearchParams;t.append("type","cmd"),t.append("content",e.target.innerText.replace(/\r|\n/gi,""));let n=this;var s={user:n.user,pwd:n.pwd,cmd:e.target.innerText,response:this.curResponse,type:"md"};d.post("/api",t).then((function(e){console.log("response: ",e),s.response=e.data,n.history.push(s),console.log("history:",this.history)})).catch((function(e){console.log(e)})),e.target.innerText=""},displayClosestTip(e){var t=e.target.innerText;if(t)for(var n=0;n<this.tips.length;n++){for(var s=0;s<this.tips[n].length&&this.tips[n][s]==t[s];s++);if(s==t.length)return void(this.autoTip=this.tips[n].substr(s))}this.autoTip=""},autoComplete(e){e.preventDefault(),e.target.innerText+=this.autoTip+" "}}},L=Object.assign(C,{setup:function(d){return(d,h)=>{const f=e("v-md-preview");return t(),n("div",{id:"main",onClick:h[4]||(h[4]=(...e)=>d.focusInputLine&&d.focusInputLine(...e))},[s("span",null,r(d.introduction),1),s("div",g,[(t(!0),n(o,null,i(d.history,((e,s)=>(t(),n("span",null,[a(" ["+r(e.user)+"@MySite "+r(e.pwd)+"]# "+r(e.cmd)+" ",1),y,"md"==e.type?(t(),p(f,{key:0,text:e.response},null,8,["text"])):l("",!0),v,T])))),256))]),s("div",b,[s("span",w,"["+r(d.user)+"@MySite "+r(d.pwd)+"]#Â ",1),s("span",{ref:(e,t)=>{t.inputLine=e},class:"input-text",contenteditable:"true",spellcheck:"false",style:{"padding-right":"0px","margin-right":"0px"},onKeydown:h[0]||(h[0]=c(((...e)=>d.preventTab&&d.preventTab(...e)),["tab"])),onKeyup:[h[1]||(h[1]=c(((...e)=>d.cmdCompleted&&d.cmdCompleted(...e)),["enter"])),h[2]||(h[2]=c(u(((...e)=>d.autoComplete&&d.autoComplete(...e)),["prevent"]),["tab"])),h[3]||(h[3]=(...e)=>d.displayClosestTip&&d.displayClosestTip(...e))]},null,544),s("span",x,r(d.autoTip),1)])])}}});h.use(f);const P=m(L);P.use(h),P.mount("#app");
